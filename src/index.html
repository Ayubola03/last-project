<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
  <title>ORDER</title>
</head>
<body class="bg-neutral-50 font-sans flex">
  <div class="container mx-auto py-8 " x-data="cartApp()">
    <h1 class="text-3xl font-bold mb-6">Desserts</h1>

    <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Example Dessert Item -->
      <template x-for="item in items" :key="item.id">
        <div class="border rounded-lg shadow-sm bg-white">
          <img :src="item.image" alt="Dessert" class="rounded-t-lg w-full h-40 object-cover">
          <div class="p-4">
            <h2 class="text-lg font-medium" x-text="item.name"></h2>
            <p class="text-gray-500" x-text="item.price"></p>
            <div class="mt-4">
              <button 
                class="bg-orange-500 text-white px-4 py-2 rounded-md focus:outline-none hover:bg-orange-600"
                x-show="!item.inCart"
                @click="addToCart(item)">
                Add to Cart
              </button>
              <div class="flex items-center space-x-2" x-show="item.inCart">
                <button 
                  class="bg-gray-200 px-3 py-1 rounded-md text-gray-700"
                  @click="decreaseQuantity(item)">-</button>
                <span x-text="item.quantity"></span>
                <button 
                  class="bg-gray-200 px-3 py-1 rounded-md text-gray-700"
                  @click="increaseQuantity(item)">+</button>
              </div>
            </div>
          </div>
        </div>
      </template>
    </div>
 <!-- Cart Section -->
 <div class="mt-8">
  <h2 class="text-2xl font-semibold">Your Cart (<span x-text="cart.length"></span>)</h2>
  <div x-show="cart.length > 0">
    <ul>
      <template x-for="cartItem in cart" :key="cartItem.id">
        <li class="flex items-center py-2 border-b">
          <div class="flex-1">
            <span x-text="cartItem.name" class="block font-medium"></span>
            <div class="text-gray-500">
              x<span x-text="cartItem.quantity"></span>
              ($<span x-text="(cartItem.price * cartItem.quantity).toFixed(2)"></span>)
            </div>
          </div>
          <!-- <button 
            class="text-red-500 hover:text-red-700 focus:outline-none"
            @click="removeFromCart(cartItem)">
            &times;
          </button> --> 
        </li>
      </template>
    </ul>
    <div class="mt-4">
      <p class="text-lg font-semibold">Total: $<span x-text="cartTotal.toFixed(2)"></span></p>
      <button 
        class="bg-green-500 text-white px-4 py-2 rounded-md mt-2 focus:outline-none hover:bg-green-600"
        @click="confirmOrder">
        Confirm Order
      </button>
    </div>
  </div>
  <p x-show="cart.length === 0" class="text-gray-500">Your cart is empty.</p>
</div>

<!-- Order Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" x-show="orderConfirmed">
  <div class="bg-white p-8 rounded-lg shadow-lg text-center">
    <h2 class="text-2xl font-semibold mb-4">Order Confirmed</h2>
    <p>We hope you enjoy your food!</p>
    <ul class="mt-4">
      <template x-for="cartItem in cart" :key="cartItem.id">
        <li class="flex items-center justify-between py-2 border-b">
          <img :src="cartItem.image" alt="Dessert" class="w-12 h-12 object-cover rounded mr-4">
          <div class="flex-1 text-left">
            <span x-text="cartItem.name" class="block font-medium"></span>
            <span class="text-gray-500">x<span x-text="cartItem.quantity"></span></span>
          </div>
          <span>$<span x-text="(cartItem.price * cartItem.quantity).toFixed(2)"></span></span>
        </li>
      </template>
    </ul>
    <p class="mt-4 text-lg font-semibold">Total: $<span x-text="cartTotal.toFixed(2)"></span></p>
    <button 
      class="bg-blue-500 text-white px-4 py-2 rounded-md mt-4 focus:outline-none hover:bg-blue-600"
      @click="startNewOrder">
      Start New Order
    </button>
  </div>
</div>
</div>

<script>
function cartApp() {
  return {
    items: [
      { id: 1, name: 'Waffle with Berries', price: 6.50, image: 'images/waffle.jpg', inCart: false, quantity: 0 },
      { id: 2, name: 'Vanilla Bean Crème Brûlée', price: 7.00, image: 'images/creme.jpg', inCart: false, quantity: 0 },
      { id: 3, name: 'Macaron Mix of Five', price: 8.00, image: 'images/macaron.jpg', inCart: false, quantity: 0 },
      { id: 4, name: 'Classic Tiramisu', price: 5.50, image: 'images/mobile.jpg', inCart: false, quantity: 0 },
      { id: 5, name: 'Pistachio Baklava', price: 4.00, image: 'images/bread.jpg', inCart: false, quantity: 0 },
      { id: 6, name: 'Lemon Meringue Pie', price: 5.00, image: 'images/merin.jpg', inCart: false, quantity: 0 },
      { id: 7, name: 'Red Velvet Cake', price: 4.50, image: 'images/cake.jpg', inCart: false, quantity: 0 },
      { id: 8, name: 'Salted Caramel Brownie', price: 5.50, image: 'images/brown.jpg', inCart: false, quantity: 0 },
      { id: 9, name: 'Vanilla Panna Cotta', price: 6.50, image: 'images/panna.jpg', inCart: false, quantity: 0 }
    ],
    cart: [],
    orderConfirmed: false,

    addToCart(item) {
      item.inCart = true;
      item.quantity = 1;
      this.cart.push(item);
    },
    increaseQuantity(item) {
          item.quantity++;
        },

        decreaseQuantity(item) {
          if (item.quantity > 1) {
            item.quantity--;
          } else {
            this.removeFromCart(item);
          }
        },

        removeFromCart(item) {
          item.inCart = false;
          item.quantity = 0;
          this.cart = this.cart.filter(cartItem => cartItem.id !== item.id);
        },

        get cartTotal() {
          return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        },

        confirmOrder() {
          this.orderConfirmed = true;
        },

        startNewOrder() {
          this.cart.forEach(item => {
            item.inCart = false;
            item.quantity = 0;
          });
          this.cart = [];
          this.orderConfirmed = false;
        },
      };
    }
  </script>
</body>
</html>